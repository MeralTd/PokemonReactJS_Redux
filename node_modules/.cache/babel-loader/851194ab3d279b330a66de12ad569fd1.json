{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\tosh\\u0131ba\\\\Downloads\\\\PokemonApp\\\\src\\\\components\\\\Fetch.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DisplayError from './DisplayError';\nimport * as actionCreators from '../actions';\n\nvar Fetch =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Fetch, _Component);\n\n  function Fetch() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Fetch);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Fetch)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.fetchPromise =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var url, query, res, json;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = _this.props.type;\n              _context.next = _context.t0 === 'cards' ? 3 : 6;\n              break;\n\n            case 3:\n              query = new URLSearchParams(_this.props.query);\n              url = \"https://api.pokemontcg.io/v1/cards\";\n              return _context.abrupt(\"break\", 7);\n\n            case 6:\n              return _context.abrupt(\"break\", 7);\n\n            case 7:\n              _context.next = 9;\n              return fetch(url);\n\n            case 9:\n              res = _context.sent;\n\n              if (!res.ok) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.next = 13;\n              return res.json();\n\n            case 13:\n              json = _context.sent;\n              return _context.abrupt(\"return\", json);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _this;\n  }\n\n  _createClass(Fetch, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.loadingData(true);\n      this.props.resetFilter(this.props.type); // Call for and save data\n\n      this.fetchPromise().then(function (json) {\n        _this2.props.storeData(json);\n\n        _this2.props.loadingData(false);\n      }).catch(function (err) {\n        _this2.props.saveErrorMessage('Sorry, fetching failed');\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.errorMessage) {\n        return React.createElement(DisplayError, {\n          message: this.props.errorMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        });\n      }\n\n      return this.props.render(this.props);\n    }\n  }]);\n\n  return Fetch;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(actionCreators, dispatch);\n}\n\nexport default connect(function (state) {\n  return state;\n}, mapDispatchToProps)(Fetch);","map":{"version":3,"sources":["C:\\Users\\toshÄ±ba\\Downloads\\PokemonApp\\src\\components\\Fetch.js"],"names":["React","Component","connect","bindActionCreators","DisplayError","actionCreators","Fetch","fetchPromise","props","type","query","URLSearchParams","url","fetch","res","ok","json","loadingData","resetFilter","then","storeData","catch","err","saveErrorMessage","errorMessage","render","mapDispatchToProps","dispatch","state"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAO,KAAKC,cAAZ,MAAgC,YAAhC;;IAEMC,K;;;;;;;;;;;;;;;;;UAEJC,Y;;;;6BAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAGN,MAAKC,KAAL,CAAWC,IAHL;AAAA,8CAIN,OAJM;AAAA;;AAAA;AAKHC,cAAAA,KALG,GAKK,IAAIC,eAAJ,CAAoB,MAAKH,KAAL,CAAWE,KAA/B,CALL;AAMTE,cAAAA,GAAG,uCAAH;AANS;;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAYKC,KAAK,CAACD,GAAD,CAZV;;AAAA;AAYPE,cAAAA,GAZO;;AAAA,mBAcVA,GAAG,CAACC,EAdM;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAeQD,GAAG,CAACE,IAAJ,EAfR;;AAAA;AAeLA,cAAAA,IAfK;AAAA,+CAgBJA,IAhBI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;wCAoBK;AAAA;;AAClB,WAAKR,KAAL,CAAWS,WAAX,CAAuB,IAAvB;AACA,WAAKT,KAAL,CAAWU,WAAX,CAAuB,KAAKV,KAAL,CAAWC,IAAlC,EAFkB,CAIlB;;AACA,WAAKF,YAAL,GACGY,IADH,CACQ,UAAAH,IAAI,EAAI;AACZ,QAAA,MAAI,CAACR,KAAL,CAAWY,SAAX,CAAqBJ,IAArB;;AACA,QAAA,MAAI,CAACR,KAAL,CAAWS,WAAX,CAAuB,KAAvB;AACD,OAJH,EAKGI,KALH,CAKS,UAAAC,GAAG,EAAI;AACZ,QAAA,MAAI,CAACd,KAAL,CAAWe,gBAAX,CAA4B,wBAA5B;AACD,OAPH;AAQD;;;6BAEQ;AACP,UAAG,KAAKf,KAAL,CAAWgB,YAAd,EAA4B;AAC1B,eAAO,oBAAC,YAAD;AAAc,UAAA,OAAO,EAAE,KAAKhB,KAAL,CAAWgB,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AACD,aAAO,KAAKhB,KAAL,CAAWiB,MAAX,CAAmB,KAAKjB,KAAxB,CAAP;AACD;;;;EA1CiBP,S;;AA6CpB,SAASyB,kBAAT,CAA4BC,QAA5B,EAAsC;AACpC,SAAOxB,kBAAkB,CAACE,cAAD,EAAiBsB,QAAjB,CAAzB;AACD;;AAED,eAAezB,OAAO,CACpB,UAAA0B,KAAK;AAAA,SAAIA,KAAJ;AAAA,CADe,EAEpBF,kBAFoB,CAAP,CAGbpB,KAHa,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport DisplayError from './DisplayError';\nimport * as actionCreators from '../actions';\n\nclass Fetch extends Component {\n\n  fetchPromise = async () => {\n    // Remote address\n    let url;\n    switch(this.props.type) {\n      case 'cards':\n        const query = new URLSearchParams(this.props.query);\n        url = `https://api.pokemontcg.io/v1/cards`;\n        break;\n      default:\n        break;\n    }\n    \n    const res = await fetch(url);\n\n    if(res.ok) {\n      const json = await res.json();\n      return json;\n    }\n  }\n\n  componentDidMount() {\n    this.props.loadingData(true)\n    this.props.resetFilter(this.props.type);\n\n    // Call for and save data\n    this.fetchPromise()\n      .then(json => {\n        this.props.storeData(json);\n        this.props.loadingData(false);\n      })\n      .catch(err => {\n        this.props.saveErrorMessage('Sorry, fetching failed');\n      });\n  }\n\n  render() {\n    if(this.props.errorMessage) {\n      return <DisplayError message={this.props.errorMessage} />\n    }\n    return this.props.render( this.props );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(actionCreators, dispatch);\n}\n\nexport default connect(\n  state => state,\n  mapDispatchToProps\n)(Fetch);"]},"metadata":{},"sourceType":"module"}